<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RevenueCat Integration Guide — Prototype</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,600;0,700;1,600&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --rc-red: #E8383A;
    --rc-red-light: #FEF2F2;
    --rc-red-mid: #FECACA;
    --ink: #1A1A1A;
    --ink-secondary: #6B7280;
    --ink-tertiary: #9CA3AF;
    --surface: #FFFFFF;
    --surface-warm: #FAFAF8;
    --border: #E8E8E4;
    --mono: 'JetBrains Mono', monospace;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  html { scroll-behavior:smooth; font-size:16px; }
  body { font-family:'Inter',sans-serif; color:var(--ink); background:var(--surface); font-size:16px; line-height:1.7; }

  /* ─── NAV ─── */
  nav {
    position:fixed; top:0; left:0; right:0; z-index:100;
    background:rgba(255,255,255,0.95); backdrop-filter:blur(12px);
    border-bottom:1px solid var(--border);
    padding:0 clamp(1.5rem,5vw,3rem); height:64px;
    display:flex; align-items:center; justify-content:space-between;
  }
  .nav-left { display:flex; align-items:center; gap:16px; }
  .nav-back {
    display:flex; align-items:center; gap:6px;
    font-size:15px; font-weight:500; color:var(--ink-secondary);
    text-decoration:none; padding:6px 10px; border-radius:8px;
    transition:all 0.2s;
  }
  .nav-back:hover { color:var(--ink); background:var(--surface-warm); }
  .nav-back svg { width:14px; height:14px; }
  .nav-divider { width:1px; height:24px; background:var(--border); }
  .nav-brand { font-size:16px; font-weight:600; color:var(--ink); }
  .nav-brand span { color:var(--rc-red); }

  /* ─── CONTENT ─── */
  .content {
    max-width:820px;
    margin:0 auto;
    padding:clamp(2rem,5vw,3rem) clamp(1.5rem,5vw,3rem);
    padding-top:100px;
  }

  /* ─── HERO ─── */
  .hero { margin-bottom:48px; }
  .hero-badge {
    display:inline-flex; align-items:center; gap:8px;
    font-size:13px; font-weight:600; color:var(--rc-red);
    background:var(--rc-red-light); border:1px solid var(--rc-red-mid);
    padding:6px 14px; border-radius:100px; margin-bottom:20px;
  }
  .hero h1 {
    font-family:'Playfair Display',serif;
    font-size:clamp(2rem,4vw,2.8rem);
    font-weight:700; line-height:1.2; letter-spacing:-0.02em;
    margin-bottom:16px;
  }
  .hero p {
    font-size:18px; color:var(--ink-secondary); line-height:1.7;
    max-width:580px;
  }

  /* ─── LANGUAGE SWITCHER ─── */
  .lang-bar {
    display:flex; gap:6px;
    background:#F3F4F6; padding:5px; border-radius:10px;
    width:fit-content; margin-bottom:48px;
  }
  .lang-btn {
    padding:8px 20px; border-radius:7px; border:none; background:none;
    font-size:15px; font-weight:500; color:var(--ink-secondary); cursor:pointer;
    transition:all 0.2s; font-family:'Inter',sans-serif;
  }
  .lang-btn:hover { color:var(--ink); }
  .lang-btn.active { background:#fff; color:var(--ink); box-shadow:0 1px 4px rgba(0,0,0,0.1); font-weight:600; }

  /* ─── STEPS ─── */
  .step { margin-bottom:64px; }
  .step:last-child { margin-bottom:100px; }
  
  .step-header {
    display:flex; align-items:center; gap:12px;
    margin-bottom:16px;
  }
  .step-num {
    width:40px; height:40px; border-radius:50%;
    background:var(--rc-red-light); color:var(--rc-red);
    display:flex; align-items:center; justify-content:center;
    font-size:18px; font-weight:700; flex-shrink:0;
  }
  .step h2 {
    font-family:'Playfair Display',serif;
    font-size:1.8rem; font-weight:700; letter-spacing:-0.02em;
  }
  
  .step-desc {
    font-size:16px; color:var(--ink-secondary); line-height:1.7;
    margin-bottom:24px; padding-left:52px;
  }

  /* ─── CODE BLOCKS ─── */
  .code-block {
    background:#1E1E1E; border-radius:12px; overflow:hidden;
    border:1px solid #2A2A2A; margin:24px 0;
  }
  .code-header {
    display:flex; align-items:center; justify-content:space-between;
    padding:12px 18px; background:#16161A; border-bottom:1px solid #2A2A2A;
  }
  .code-lang { font-family:var(--mono); font-size:13px; color:#8B949E; }
  .code-copy {
    display:flex; align-items:center; gap:5px;
    font-size:13px; font-weight:600; color:#8B949E;
    border:none; background:none; cursor:pointer; font-family:'Inter',sans-serif;
    transition:color 0.2s;
  }
  .code-copy:hover { color:#fff; }
  .code-copy svg { width:12px; height:12px; }
  .code-body { padding:20px; overflow-x:auto; }
  .code-body pre {
    font-family:var(--mono); font-size:14px; line-height:1.8;
    color:#D4D4D4; white-space:pre;
  }
  .kw { color:#C792EA; }
  .fn { color:#82AAFF; }
  .str { color:#C3E88D; }
  .cm { color:#546E7A; font-style:italic; }
  .vr { color:#F07178; }

  /* ─── CALLOUT BOXES ─── */
  .callout {
    display:flex; gap:14px; align-items:flex-start;
    border-radius:10px; padding:16px 18px; margin-top:20px;
  }
  .callout-icon {
    width:22px; height:22px; border-radius:6px;
    display:flex; align-items:center; justify-content:center;
    flex-shrink:0;
  }
  .callout-icon svg { width:13px; height:13px; }
  .callout h4 { font-size:15px; font-weight:600; color:var(--ink); margin-bottom:4px; }
  .callout p { font-size:15px; color:var(--ink-secondary); line-height:1.6; }
  
  .callout-blue { background:#EFF6FF; border:1px solid #BFDBFE; }
  .callout-blue .callout-icon { background:#DBEAFE; }
  .callout-blue .callout-icon svg { color:#2563EB; }
  
  .callout-amber { background:#FFFBEB; border:1px solid #FDE68A; }
  .callout-amber .callout-icon { background:#FEF3C7; }
  .callout-amber .callout-icon svg { color:#D97706; }

  /* ─── FOOTER ─── */
  footer {
    border-top:1px solid var(--border);
    padding:28px clamp(1.5rem,5vw,3rem);
    text-align:center; color:var(--ink-tertiary); font-size:14px;
  }
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="nav-left">
    <a class="nav-back" href="index.html">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5"/><path d="M12 19l-7-7 7-7"/></svg>
      Back
    </a>
    <div class="nav-divider"></div>
    <div class="nav-brand">Developer Guide <span>Prototype</span></div>
  </div>
</nav>

<!-- CONTENT -->
<div class="content">
  
  <!-- HERO -->
  <div class="hero">
    <div class="hero-badge">Integration Walkthrough</div>
    <h1>Get RevenueCat running in three steps</h1>
    <p>Copy-paste code for Swift, React Native, and Flutter. No fluff — just what you need to start collecting payments.</p>
  </div>

  <!-- LANGUAGE SWITCHER -->
  <div class="lang-bar">
    <button class="lang-btn active" data-lang="swift" onclick="setLang('swift')">Swift</button>
    <button class="lang-btn" data-lang="react" onclick="setLang('react')">React Native</button>
    <button class="lang-btn" data-lang="flutter" onclick="setLang('flutter')">Flutter</button>
  </div>

  <!-- STEPS CONTAINER -->
  <div id="steps-container"></div>

</div>

<footer>Chris Peterson — Developer Guide Prototype — RevenueCat Research</footer>

<!-- JAVASCRIPT -->
<script>
(function(){

let lang = 'swift';

function setLang(l){
  lang = l;
  document.querySelectorAll('.lang-btn').forEach(b=>b.classList.toggle('active', b.dataset.lang===l));
  renderSteps();
}
window.setLang = setLang;

const code = {
  init: {
    swift: `<span class="cm">// In your App.swift file
// Add this to your init() method</span>

<span class="kw">import</span> RevenueCat

<span class="kw">init</span>() {
  <span class="cm">// Enable debug logs</span>
  Purchases.<span class="fn">logLevel</span> = .debug
  
  <span class="cm">// Configure with your API key</span>
  Purchases.<span class="fn">configure</span>(withAPIKey: <span class="str">"appl_YourAPIKey"</span>)
}`,
    react: `<span class="cm">// In App.tsx or App.js
// Add this import at the top</span>

<span class="kw">import</span> Purchases <span class="kw">from</span> <span class="str">'react-native-purchases'</span>;

<span class="cm">// Inside your component</span>
<span class="kw">useEffect</span>(() => {
  <span class="kw">const</span> setup = <span class="kw">async</span> () => {
    <span class="kw">await</span> Purchases.<span class="fn">setLogLevel</span>(Purchases.LOG_LEVEL.DEBUG);
    
    <span class="kw">if</span> (Platform.OS === <span class="str">'ios'</span>) {
      Purchases.<span class="fn">configure</span>({ apiKey: <span class="str">"appl_YourAPIKey"</span> });
    } <span class="kw">else</span> {
      Purchases.<span class="fn">configure</span>({ apiKey: <span class="str">"goog_YourAPIKey"</span> });
    }
  };
  <span class="fn">setup</span>();
}, []);`,
    flutter: `<span class="cm">// In main.dart
// Add this before runApp()</span>

<span class="kw">import</span> <span class="str">'package:purchases_flutter/purchases_flutter.dart'</span>;

<span class="kw">void</span> <span class="fn">main</span>() <span class="kw">async</span> {
  WidgetsFlutterBinding.<span class="fn">ensureInitialized</span>();
  
  <span class="kw">await</span> Purchases.<span class="fn">setLogLevel</span>(LogLevel.debug);
  
  PurchasesConfiguration config;
  <span class="kw">if</span> (Platform.isIOS) {
    config = <span class="fn">PurchasesConfiguration</span>(<span class="str">"appl_YourAPIKey"</span>);
  } <span class="kw">else</span> {
    config = <span class="fn">PurchasesConfiguration</span>(<span class="str">"goog_YourAPIKey"</span>);
  }
  
  <span class="kw">await</span> Purchases.<span class="fn">configure</span>(config);
  <span class="fn">runApp</span>(<span class="kw">const</span> MyApp());
}`
  },
  offerings: {
    swift: `<span class="cm">// Fetch available subscription packages</span>

<span class="kw">func</span> <span class="fn">loadProducts</span>() {
  Purchases.shared.<span class="fn">getOfferings</span> { (offerings, error) <span class="kw">in</span>
    <span class="kw">if let</span> error = error {
      print(<span class="str">"Error: \\(error.localizedDescription)"</span>)
      <span class="kw">return</span>
    }
    
    <span class="kw">if let</span> packages = offerings?.current?.availablePackages {
      print(<span class="str">"Found \\(packages.count) packages"</span>)
      <span class="vr">self</span>.products = packages
    }
  }
}`,
    react: `<span class="cm">// Fetch available subscription packages</span>

<span class="kw">const</span> <span class="fn">loadProducts</span> = <span class="kw">async</span> () => {
  <span class="kw">try</span> {
    <span class="kw">const</span> offerings = <span class="kw">await</span> Purchases.<span class="fn">getOfferings</span>();
    
    <span class="kw">if</span> (offerings.current) {
      console.<span class="fn">log</span>(<span class="str">"Packages:"</span>, offerings.current.availablePackages);
      <span class="fn">setProducts</span>(offerings.current.availablePackages);
    }
  } <span class="kw">catch</span> (e) {
    console.<span class="fn">error</span>(<span class="str">"Error:"</span>, e);
  }
};`,
    flutter: `<span class="cm">// Fetch available subscription packages</span>

<span class="kw">Future</span>&lt;<span class="kw">void</span>&gt; <span class="fn">loadProducts</span>() <span class="kw">async</span> {
  <span class="kw">try</span> {
    Offerings offerings = <span class="kw">await</span> Purchases.<span class="fn">getOfferings</span>();
    
    <span class="kw">if</span> (offerings.current != <span class="kw">null</span>) {
      print(<span class="str">"Packages: \${offerings.current!.availablePackages}"</span>);
      <span class="fn">setState</span>(() {
        products = offerings.current!.availablePackages;
      });
    }
  } <span class="kw">catch</span> (e) {
    print(<span class="str">"Error: \$e"</span>);
  }
}`
  },
  purchase: {
    swift: `<span class="cm">// Make a purchase</span>

<span class="kw">func</span> <span class="fn">buy</span>(package: Package) {
  Purchases.shared.<span class="fn">purchase</span>(package: package) { 
    (transaction, customerInfo, error, userCancelled) <span class="kw">in</span>
    
    <span class="kw">if</span> userCancelled { <span class="kw">return</span> }
    
    <span class="kw">if let</span> error = error {
      print(<span class="str">"Purchase failed: \\(error)"</span>)
      <span class="kw">return</span>
    }
    
    <span class="cm">// Check entitlement</span>
    <span class="kw">if</span> customerInfo?.entitlements[<span class="str">"pro"</span>]?.isActive == <span class="kw">true</span> {
      print(<span class="str">"Success! User now has Pro access"</span>)
    }
  }
}`,
    react: `<span class="cm">// Make a purchase</span>

<span class="kw">const</span> <span class="fn">buy</span> = <span class="kw">async</span> (pkg) => {
  <span class="kw">try</span> {
    <span class="kw">const</span> { customerInfo } = <span class="kw">await</span> Purchases.<span class="fn">purchasePackage</span>(pkg);
    
    <span class="cm">// Check entitlement</span>
    <span class="kw">if</span> (customerInfo.entitlements.active[<span class="str">"pro"</span>]) {
      console.<span class="fn">log</span>(<span class="str">"Success! User now has Pro access"</span>);
    }
  } <span class="kw">catch</span> (e) {
    <span class="kw">if</span> (!e.userCancelled) {
      <span class="fn">alert</span>(<span class="str">"Purchase failed: "</span> + e.message);
    }
  }
};`,
    flutter: `<span class="cm">// Make a purchase</span>

<span class="kw">onPressed</span>: () <span class="kw">async</span> {
  <span class="kw">try</span> {
    CustomerInfo info = <span class="kw">await</span> Purchases.<span class="fn">purchasePackage</span>(package);
    
    <span class="cm">// Check entitlement</span>
    <span class="kw">if</span> (info.entitlements.all[<span class="str">"pro"</span>]?.isActive == <span class="kw">true</span>) {
      print(<span class="str">"Success! User now has Pro access"</span>);
    }
  } <span class="kw">on</span> PlatformException <span class="kw">catch</span> (e) {
    <span class="kw">var</span> code = PurchasesErrorHelper.<span class="fn">getErrorCode</span>(e);
    <span class="kw">if</span> (code != PurchasesErrorCode.purchaseCancelledError) {
      print(<span class="str">"Error: \${e.message}"</span>);
    }
  }
}`
  }
};

function makeCodeBlock(key){
  return `<div class="code-block">
    <div class="code-header">
      <span class="code-lang">${lang}</span>
      <button class="code-copy" onclick="copyCode('${key}')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
        Copy
      </button>
    </div>
    <div class="code-body"><pre>${code[key][lang]}</pre></div>
  </div>`;
}

function renderSteps(){
  document.getElementById('steps-container').innerHTML = `
    <div class="step">
      <div class="step-header">
        <div class="step-num">1</div>
        <h2>Initialize the SDK</h2>
      </div>
      <p class="step-desc">This code needs to run when your app starts. If it doesn't run early enough, RevenueCat won't be able to check whether the user already has an active subscription.</p>
      ${makeCodeBlock('init')}
      <div class="callout callout-blue">
        <div class="callout-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
        </div>
        <div>
          <h4>Sanity Check</h4>
          <p>Run your app and check the debug console. You should see <strong>[RevenueCat] Debug: SDK configured</strong>. If you don't, the code isn't in the right place.</p>
        </div>
      </div>
    </div>

    <div class="step">
      <div class="step-header">
        <div class="step-num">2</div>
        <h2>Fetch Your Products</h2>
      </div>
      <p class="step-desc">Ask RevenueCat "what's the current offering?" instead of hardcoding product IDs. This way you can change prices in the dashboard without shipping an app update.</p>
      ${makeCodeBlock('offerings')}
      <div class="callout callout-amber">
        <div class="callout-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
        </div>
        <div>
          <h4>Getting 0 Packages?</h4>
          <p>Your products either don't exist in App Store Connect yet, or their status is "Missing Metadata." Make sure you've completed the store setup first.</p>
        </div>
      </div>
    </div>

    <div class="step">
      <div class="step-header">
        <div class="step-num">3</div>
        <h2>Make the Purchase</h2>
      </div>
      <p class="step-desc">Connect this to your "Subscribe" button. The key thing: it checks the entitlement to confirm success. Replace "pro" with whatever entitlement identifier you created in the dashboard.</p>
      ${makeCodeBlock('purchase')}
    </div>
  `;
}

function copyCode(key){
  const raw = code[key][lang].replace(/<[^>]*>/g,'');
  navigator.clipboard.writeText(raw);
}
window.copyCode = copyCode;

renderSteps();

})();
</script>
</body>
</html>
